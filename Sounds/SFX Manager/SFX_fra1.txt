-------------------------------------------------------------------------------------------------------
* Restrictions et notes importantes avant d'utiliser cet outil :
-------------------------------------------------------------------------------------------------------

     . Ce programme reconnait uniquement la structure des répertoires standard TRLE. Sélectionnez l'éditeur de niveaux la première fois que vous lancez cet outil.

     . Aux utilisateurs de TRWEST :	- Vous pouvez utiliser cet outil en toute tranquillité.
				- Rappelez-vous que chaque fois que vous regénérez votre WAD
				avec TRWEST, vous devrez regénérer les fichiers SFX à l'aide
				de ce programme.

     . Aux utilisateurs de WADMERGER :	- Les sons provenant d'autres TR ne sont pas reconnus par ce programme
				et sont donc perdus. Cependant, vous pourrez les réincorporer par la suite
				à l'aide de Wadmerger. Pour cela, je suggère de créer auparavant des Wads
				temporaires contenant les objets utilisant ces sons.


----------------------------------------------------------------------------------------
* Comment fonctionne ce programme :
----------------------------------------------------------------------------------------

Ce programme permet simplement d'ajouter et supprimer des sons à vos wads. En réalité, il n'affecte que les fichiers SAM et SFX en automatisant de manière visuelle la modification du fichier "sounds.txt". L'intégrité du wad est donc conservée.
Toutes les manipulations sont faites en mémoire. Donc, tant que vous ne cliquez pas sur <Générer>, vous ne risquez rien.
Tout le logiciel est basé sur une "lettre" qui représente le wad sur lequel vous travaillez. Cette information est donc primordiale et doit absolument être indiquée. Voir le chapître suivant.

A chaque lancement de ce programme, le fichier "sounds.txt" est chargé. Les modifications précédemment apportées sont donc remontées et affichées. Si la lettre indiquée est trouvée dans le fichier la mention ":[OK]" apparaît au bout de chaque ligne correspondante dans la liste des "ID sons".
Les sons affectés systématiquement, c'est-à-dire ceux représentés par la lettre "#g" portent toujours la mention ":[OK]". Cependant, cette mention n'est pas affichée. Pour l'afficher, cliquez sur l'icône figurant un "oeil".


     . Sélectionnez un son dans la liste des ID sons, ou effectuez une recherche comme suit :

	- Préparer la recherche :
		. Entrez un nom, partiel ou non, ou un n° dans la zone de recherche.
		. Cliquez sur "[OK]" pour recherche uniquement les sons déjà affectés
		. Choisissez le sens de recherche (Haut ou Bas)
		. Choisissez si les Majuscules/Minuscules doivent être respectées pour la recherche
	- Lancer la recherche
		. Cliquez sur le bouton de recherche (jumelles)
		. Cliquez à nouveau pour poursuivre la recherche dans le sens indiqué


     . La liste [WADs (lettres) assignés] montre les WADs pour lesquels le son sélectionné est incorporé

	- "??" signifie que la lettre mentionnée n'est pas reconnue par le programme (sans importance),
	- Sinon, la lettre suivie du nom du WAD (Standard ou non) apparaîtra.
	- la mention [All WADs] indique que le son est affecté systématiquement.


--------------------------------------------------
* Travailler sur les sons : 
--------------------------------------------------

Commencez par sélectionner le nom du WAD sur lequel vous travaillez. Si aucun WAD n'est disponible, ajoutez-en un en cliquant sur le bouton [gestion des références WAD/Lettre] en dessous du nom du WAD. 

Attention :
	- le logiciel est sensible aux majuscules et minuscules. Ainsi, "H" et "h" ne représentent pas le même WAD.

Sélectionnez ensuite lequel des fichiers vous voulez charger :
	- Soit le fichier SAM comportant la liste de tous les samples incorporés par Trwest ou Wadmerger
	- Soit le fichier WAS comportant la liste de tous les objets incorporés par Trwest ou Wadmerger

Attention : dans le cas du fichier WAS, il se peut que des sons ne soient pas correctement affectés. Ce problème survient uniquement si des objets ont été modifiés par Wadmerger, notamment si des sons différents des originaux ont été affectés à leurs animations. C'est aussi le cas pour les objets de type ANIMATING qui peuvent contenir des sons spécifiques. Dans ce cas, il vous appartient alors de les ajouter par ce programme à la suite du chargement du fichier.

Cliquez ensuite sur <Charger> (répertoire) pour ouvrir le fichier correspondant et ainsi afficher automatiquement tous les sons déjà affectés. A présent, vous ètes prêts à travailler sur les sons.


>1er cas : affecter la lettre (WAD) son par son : sélectionnez un son dans la liste [ID sons]

     . Ajouter le son au wad : cliquez sur <Ajouter> (+) pour assigner la lettre au son sélectionné. La mention [:OK] sera affichée.
     . Supprimer le son du wad : sélectionnez une lettre dans la liste et cliquez sur <Enlever> (-). La mention [:OK] sera effacée. 


>2ème cas : affecter la lettre par objet :

     . Cliquez sur <Afficher les objets> pour afficher la fenêtre de sélection des objets. Cliquez à nouveau sur
        l'icône pour fermer la fenêtre.
	- dans cette nouvelle fenêtre, choisissez un objet en fonction de sa catégorie (ennemi, ami, véhicule, etc...)
	- cliquez sur un ID et la liste de la fenêtre principale se positionnera sur le son correspondant
	- cliquez ensuite sur <Choisir> (crayon) pour l'afficher dans la fenêtre principale. 
	   Vous pouvez également double cliquer sur le nom d'un objet pour le sélectionner

     . Ajouter l'objet : Cliquez <Ajouter> (+) pour que TOUS les sons correspondant à l'objet soient assignés automatiquement
     . Supprimer l'objet : Cliquez sur <Enlever> (-) pour retirer TOUS les sons de l'objet
     . Pour effacer le nom de l'objet et travailler à nouveau son par son, cliquez sur <Effacer objet> (gomme)


Cliquez sur <Afficher/Cacher les sons #g> (oeil) pour voir dans la liste [ID sons] tous les sons assignés systématiquement

Cliquez à nouveau sur <Afficher/Cacher les sons #g> pour désactiver l'affichage des sons assignés systématiquement

Cliquez sur <Enlever la lettre> (corbeille) pour retirer la lettre de tous les sons auxquels elle était assignée


--------------------------------------------------------------------
* Modifier les valeurs des samples :
--------------------------------------------------------------------

Pour modifier les différentes valeurs associées aux samples, entrez simplement celles-ci dans le cadre [Valeurs Samples].
Voir ci-dessous pour connaître la signification de chaque valeur.
Seule la zone PIT accepte une valeur négative. Cliquez ensuite sur <Accepter valeurs> (flèche verte) pour modifier la ligne

Vous pouvez également écouter les différents samples. Pour ce faire, sélectionnez celui qui vous intéresse et cliquez sur <Jouer>

Vous avez aussi la possibilité de renommer les samples. Cette fonction est utile si vous voulez affecter un son spécifique que vous avez créé par exemple, et que vous ne voulez pas qu'il écrase un sample original. Pour renommer un sample, sélectionnez-le et tapez son nouveau nom dans le champ à côté. Cliquez ensuite sur <Renommer> (crayon). Le son que vous indiquez doit exister dans le répertoire \trle\sound\samples\ et doit être au format PCM 22050Khz 16bits mono sinon SFX Man le refusera. Toutes les modifications de noms sont conservées pour chaque wad.

De plus, vous pouvez ajouter un nouveau sample à la liste déjà existante ou bien en enlever un. SFX Manager contrôlera que la somme des longueurs de tous les noms figurant sur la liste n'excède pas 32 caractères espaces compris, correspondant à la taille maximale autorisée. Chaque nom de sample ne peut à lui seul dépasser 8 caractères.

Si vous voulez annuler les modifications effectuées sur une ligne de son, cliquez sur <Restaurer ligne> (flèche orange) en bas de la fenêtre.


Signification des différentes valeurs des samples :
----------------------------------------------------------------------------
VOL	- Volume    	: Indiquer une valeur entre 01 et 99. Ne rien mettre pour que le son ne sois pas entendu.
V	- Random Volume	: Cocher la case pour que le volume soit légèrement modifié à chaque fois qu'il est joué.
CH	- Chance    	: Indiquer un pourcentage de probabilité que le son soit joué en jeu.
			  Ne rien mettre pour que le son soit toujours joué.
PIT	- Pitch		: Indiquer la hauteur du son. Une valeur négative abaisse la hauteur tandis qu'une valeur
			  positive l'augmente. Ne rien mettre pour ne rien changer.
P	- Random Pitch	: Cocher la case pour que la hauteur soit légèrement modifiée à chaque fois que le son est joué.
RAD	- Radius    	: Indiquer le rayon de perception du son en jeu. Plus le rayon est élevé, plus on l'entend de loin.
R	- Random Radius	: Cocher la case pour que le rayon soit légèrement modifié à chaque fois que le son est joué.
L	- Loop		: Cocher la case pour indiquer que le son est une boucle, comme les waterfall par exemple.
N	- N/A        	: Non appliqué.

P et V ensembles sont utilisés pour un son qui se répète souvent.
Lorsqu'un son est très souvent répété, cela donne un effet d'écoute "mécanique" assez désagréable. Avec P et V cochés, les légères modifications appliquées à chaque fois diminuent significativement cet effet.


--------------------------------------------------------------------
* Appliquer toutes les modifications :
--------------------------------------------------------------------

Cliquez sur <Appliquer modification> (encoche verte) pour appliquer définitivement toutes les modifications au fichier [Sounds.txt].

	- Une copie de sauvegarde de [Sounds.txt] sera créée à la 1ère utilisation de ce programme
	- Le fichier sauvegardé aura pour nom [Orig_Sounds.txt] et sera placé au même endroit que [Sounds.txt]


Pour récupérer un fichier [sounds.txt] d'origine, cliquez sur <Restaurer défauts> (DD avec flèche). Cette fonction ne récupère pas le fichier [Orig_Sounds.txt] créé préalablement, mais regénère un fichier [Sounds.txt] standard fourni avec trle à l'origine. Toutes les modifications effectuées dans la session en cours seront perdues. Vous pouvez néanmoins recharger le wad pour récupérer les informations.

Vous avez également la possibilité de restaurer par la même occasion, et indépendamment du fichier [sounds.txt], le répertoire \Samples d'origine ainsi que les fichiers SAM et SFX originaux fournis avec TRLE. Ces répertoires, nommés \Samples_ORIG et \SFX_ORIG sont fournis avec SFX Manager et doivent se trouver dans le même répertoire.

Avant de restaurer les défauts, il est fortement conseillé d'avoir une sauvegarde des répertoires \sound et \wads.

--------------------------------------------------------------------
* Modifier manuellement Sounds.txt :
--------------------------------------------------------------------

Cliquez sur <Ouvrir sounds.txt> (bloc note) pour ouvrir le fichier [Sounds.txt] à l'aide du [Notepad] de Windows.
Cette option vous permet de voir toutes les modifications apportées au fichier [Sounds.txt] avant de lancer la génération des fichiers SAM et SFX.

ATTENTION : si vous modifiez des informations manuellement, veillez à respecter l'intégrité du fichier :

	- ne décalez pas les informations (n'ajoutez pas d'espace ou de tabulations)
	- ne remplacez pas les tabulations par des espaces et vice-versa
	- ne modifiez jamais les noms des sons en début de ligne
	- n'ajoutez aucune ligne et n'en supprimez pas non plus
	- n'indiquez pas de noms de samples avec des espaces ou des caractères spéciaux

Toute modification qui ne respecte pas ces différents points risque de causer des problèmes majeurs dans la génération des fichiers SAM et SFX. Les sons ne fonctionneront alors plus dans le jeu.


--------------------------------------------------------------------
* Créer et copier les fichiers SAM et SFX :
--------------------------------------------------------------------

Cliquez sur <Générer SFX> (haut parleur).

Les fichiers SAM et SFX seront générés à l'aide du programme pcwadsfx.exe fourni avec trle. Il seront également copiés vers le répertoire \graphics\wads\.

A présent, vous pouvez tester votre niveau pour évaluer les changements.


ATTENTION : si des samples ont été renommés et que donc vous utilisez des sons importés ou retravaillés, veillez bien à ce qu'ils soient au bon format, c'est-à-dire PCM 22050Khz 16 bits mono. Un contrôle général de tout le répertoire \sound\samples peut être effectué auparavant en cliquant sur le bouton représentant un haut-parleur avec un dossier en haut de la fenêtre.